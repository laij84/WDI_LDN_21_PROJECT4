function oAuthConfig(e){e.facebook({url:"api/oauth/facebook",clientId:"1753104004957041"})}function Router(e,o){e.state("home",{url:"/",templateUrl:"templates/home.html"}).state("register",{url:"/register",templateUrl:"templates/register.html",controller:"RegisterController as register"}).state("login",{url:"/login",templateUrl:"templates/login.html",controller:"LoginController as login"}),o.otherwise("/")}function LoginController(e,o,t,r){this.credentials={},this.authenticate=function(e){r.authenticate(e).then(function(){t.$broadcast("loggedIn"),o.go("home")})},this.submit=function(){r.login(this.credentials,{url:"/api/login"}).then(function(){t.$broadcast("loggedIn"),o.go("home")})}}function MainController(e,o,t,r){var n=this;this.currentUser=e.decodeToken(),this.logout=function(){e.clearToken(),this.currentUser=null,o.go("home")},t.$on("loggedIn",function(){n.currentUser=e.decodeToken()}),t.$on("unauthorized",function(){n.errorMessage="You must be logged in!",o.go("login")})}function RegisterController(e,o,t){this.user={},this.submit=function(){e.register(this.user,function(e){t.$broadcast("loggedIn"),o.go("home")})}}function UsersController(e){this.all=e.query()}function User(e,o){return e(o+"/users",{id:"@_id"},{update:{method:"PUT"},login:{method:"POST",url:o+"/login"},register:{method:"POST",url:o+"/register"}})}function TokenService(e,o){this.setToken=function(o){return e.localStorage.setItem("token",o)},this.getToken=function(){return e.localStorage.getItem("token")},this.decodeToken=function(){var e=this.getToken();return e?o.decodeToken(e):null},this.clearToken=function(){return e.localStorage.removeItem("token")}}angular.module("HomeworkApp",["ui.router","ngResource","angular-jwt","ngMessages","satellizer"]).constant("API_URL","http://localhost:3000/api").config(Router).config(oAuthConfig),oAuthConfig.$inject=["$authProvider"],Router.$inject=["$stateProvider","$urlRouterProvider"],angular.module("HomeworkApp").controller("LoginController",LoginController),LoginController.$inject=["User","$state","$rootScope","$auth"],angular.module("HomeworkApp").controller("MainController",MainController),MainController.$inject=["TokenService","$state","$rootScope","$auth"],angular.module("HomeworkApp").controller("RegisterController",RegisterController),RegisterController.$inject=["User","$state","$rootScope"],angular.module("HomeworkApp").controller("UsersController",UsersController),UsersController.$inject=["User"],angular.module("HomeworkApp").factory("User",User),User.$inject=["$resource","API_URL"],angular.module("HomeworkApp").service("TokenService",TokenService),TokenService.$inject=["$window","jwtHelper"];